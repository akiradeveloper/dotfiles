#!/usr/bin/env ruby

require "pathname"

MEMFS_DIR="/dev/shm"

file = ARGV[0]
if Pathname(file).exist?
  system("touch #{file}")
  exit
end

abspath = nil
if Pathname(file).absolute?
  abspath = file
elsif
  abspath = File.join(Pathname.pwd, file)
end

realfilepath = File.join(MEMFS_DIR, abspath)
system "mkdir -p #{File.dirname(realfilepath)}"
system "touch #{realfilepath}"
system "ln -s #{realfilepath} #{file}"
