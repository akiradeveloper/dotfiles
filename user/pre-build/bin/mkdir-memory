#!/usr/bin/env ruby

require "pathname"

MEMFS_DIR="/dev/shm"

def mkdirm(dir)
  if Pathname(dir).exist?
    exit
  end

  abspath = nil
  if Pathname(dir).absolute?
    abspath = dir
  elsif
    abspath = File.join(Pathname.pwd, dir)
  end

  realfilepath = File.join(MEMFS_DIR, abspath)
  system "mkdir -p #{realfilepath}"
  system "ln -s #{realfilepath} #{dir}"
end

ARGV.each do |dir|
  mkdirm(dir)
end
